{"openapi":"3.1.0","info":{"title":"Chess Backend API","description":"FastAPI backend implementing an in-memory single-game chess engine.\n\nNotes (MVP):\n- Basic per-piece movement rules are enforced.\n- Castling, en-passant, and check/checkmate validation are not implemented.\n- State is stored in memory (single shared game instance).","version":"0.1.0"},"paths":{"/":{"get":{"tags":["Health"],"summary":"Health Check","description":"Backend health check endpoint.\n\nReturns:\n    JSON object indicating the service is running.","operationId":"health_check__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Health Check  Get"}}}}}}},"/state":{"get":{"tags":["Chess"],"summary":"Get current game state","description":"Returns the current board (occupied squares), current_turn, and game_status.","operationId":"get_state_state_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GameStateSchema"}}}}}}},"/move":{"post":{"tags":["Chess"],"summary":"Make a move","description":"Apply a move for the current player.\n\nMove legality (MVP): per-piece movement patterns, path blocking, captures by opponent, pawn single/double moves, diagonal pawn captures, simple promotion.\n\nNot implemented: castling, en-passant, and check/checkmate validation.","operationId":"post_move_move_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MoveRequestSchema"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MoveResponseSchema"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/history":{"get":{"tags":["Chess"],"summary":"Get move history","description":"Returns the chronological move list with metadata.","operationId":"get_history_history_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HistoryResponseSchema"}}}}}}},"/restart":{"post":{"tags":["Chess"],"summary":"Restart the game","description":"Resets to the initial chess position and clears move history.","operationId":"post_restart_restart_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RestartResponseSchema"}}}}}}}},"components":{"schemas":{"BoardItemSchema":{"properties":{"position":{"type":"string","title":"Position","description":"Algebraic coordinate, e.g. 'e2'."},"piece":{"$ref":"#/components/schemas/PieceSchema","description":"Piece at that square."}},"type":"object","required":["position","piece"],"title":"BoardItemSchema","description":"An occupied board square."},"GameStateSchema":{"properties":{"board":{"items":{"$ref":"#/components/schemas/BoardItemSchema"},"type":"array","title":"Board","description":"List of occupied squares (sparse board representation)."},"current_turn":{"type":"string","enum":["white","black"],"title":"Current Turn","description":"Whose turn it is to move."},"game_status":{"type":"string","const":"in_progress","title":"Game Status","description":"Game status (MVP: only 'in_progress')."}},"type":"object","required":["board","current_turn","game_status"],"title":"GameStateSchema","description":"Current game state."},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HistoryResponseSchema":{"properties":{"history":{"items":{"$ref":"#/components/schemas/MoveHistoryItemSchema"},"type":"array","title":"History","description":"Chronological move list."}},"type":"object","required":["history"],"title":"HistoryResponseSchema","description":"Response for GET /history."},"MoveHistoryItemSchema":{"properties":{"moveNumber":{"type":"integer","title":"Movenumber","description":"Full move number (increments after black move)."},"color":{"type":"string","enum":["white","black"],"title":"Color","description":"Mover color."},"from":{"type":"string","title":"From","description":"From square."},"to":{"type":"string","title":"To","description":"To square."},"capture":{"type":"boolean","title":"Capture","description":"Whether the move captured a piece."},"promotion":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Promotion","description":"Promotion code if pawn was promoted (q,r,b,n)."},"piece":{"$ref":"#/components/schemas/PieceSchema","description":"The moved piece type and color (pre-promotion piece)."}},"type":"object","required":["moveNumber","color","from","to","capture","piece"],"title":"MoveHistoryItemSchema","description":"One move in move history."},"MoveRequestSchema":{"properties":{"from":{"type":"string","title":"From","description":"From square in algebraic form, e.g. 'e2'."},"to":{"type":"string","title":"To","description":"To square in algebraic form, e.g. 'e4'."},"promotion":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Promotion","description":"Optional promotion piece code when pawn reaches last rank: one of q,r,b,n.","examples":["q"]}},"type":"object","required":["from","to"],"title":"MoveRequestSchema","description":"Request body for POST /move."},"MoveResponseSchema":{"properties":{"state":{"$ref":"#/components/schemas/GameStateSchema","description":"Updated game state after move."},"last_move":{"$ref":"#/components/schemas/MoveHistoryItemSchema","description":"The move that was just applied."}},"type":"object","required":["state","last_move"],"title":"MoveResponseSchema","description":"Response for a successfully applied move."},"PieceSchema":{"properties":{"type":{"type":"string","enum":["pawn","rook","knight","bishop","queen","king"],"title":"Type","description":"Piece type."},"color":{"type":"string","enum":["white","black"],"title":"Color","description":"Piece color."}},"type":"object","required":["type","color"],"title":"PieceSchema","description":"A chess piece."},"RestartResponseSchema":{"properties":{"state":{"$ref":"#/components/schemas/GameStateSchema","description":"Reset game state."},"history":{"items":{"$ref":"#/components/schemas/MoveHistoryItemSchema"},"type":"array","title":"History","description":"Cleared history (empty list)."}},"type":"object","required":["state","history"],"title":"RestartResponseSchema","description":"Response for POST /restart."},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}},"tags":[{"name":"Health","description":"Service health check."},{"name":"Chess","description":"Chess game endpoints for a single shared in-memory game."}]}